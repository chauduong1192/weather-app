"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[882],{882:function(e,t,r){r.r(t),r.d(t,{App:function(){return B},default:function(){return q}});var n=r(413),a=r(204),c=r(531),s=r(757),o=r.n(s),i=r(87),u="location",p="".concat(u,"/search?query="),l=function(){var e=(0,c.Z)(o().mark((function e(t,r,n){var a,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://the-ultimate-api-challenge.herokuapp.com","/").concat("https://www.metaweather.com/api","/").concat(t),e.prev=1,e.next=4,fetch(a,{method:r,body:n,headers:{"Content-Type":"application/json"}});case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:if(e.prev=11,e.t0=e.catch(1),!e.t0){e.next=15;break}return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(t,"GET"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,c.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("".concat(p).concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("".concat(u,"/").concat(t,"/")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return function(){var t=(0,c.Z)(o().mark((function t(r){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:i.jz}),t.prev=1,t.next=4,h(e);case 4:n=t.sent,r({type:i.j$,payload:n.consolidated_weather.map((function(e){return{dayOfWeek:e.applicable_date,maxTemp:e.max_temp,minTemp:e.min_temp,weatherStateAbbr:e.weather_state_abbr}})).slice(0,5)}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({type:i.mY,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=(0,c.Z)(o().mark((function t(r){var n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:i.Pw}),t.prev=1,t.next=4,d(e);case 4:if((n=t.sent).length){t.next=7;break}return t.abrupt("return",r({type:i.PJ}));case 7:return a=n[0].woeid.toString(),r({type:i.RS,payload:a}),t.next=11,r(m(a));case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),r({type:i.f9,payload:t.t0});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},v=r(391),y=function(e){return e[v.J]},w=r(313),b=r(885),j=r(417),g=function(e){var t=e.message;return(0,j.jsx)("div",{className:"not-found-text",role:"alert",children:t||"An error occurred"})},k=function(e){var t=e.fetchLocationByCity,r=e.isError,n=e.errorMessage,a=e.isFetching,s=(0,w.useState)(""),i=(0,b.Z)(s,2),u=i[0],p=i[1],l=function(){var e=(0,c.Z)(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),u){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(u);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("form",{className:"search-form",onSubmit:l,children:[(0,j.jsxs)("div",{className:"input-group",children:[(0,j.jsx)("input",{type:"text",className:"form-control",placeholder:"Search weather for a city","aria-label":"Search","aria-describedby":"button-search",value:u,onChange:function(e){return p(e.target.value)},required:!0,disabled:a}),(0,j.jsx)("button",{onClick:l,type:"submit",className:"btn btn-secondary",disabled:a,children:"SEARCH"})]}),r&&n&&(0,j.jsx)(g,{message:n})]})},N={fetchLocationByCity:x},Z=(0,a.$j)((function(e){return{isError:y(e).isError,isFetching:y(e).isFetching,errorMessage:y(e).errorMessage}}),N)(k),C=r(816),S=r.n(C),E=r(123),T=r.n(E),_=function(e){var t=e.className,r=e.src,n=e.alt,a=e.aspectRatio,c=void 0===a?2/3:a,s=(0,w.useState)(!1),o=(0,b.Z)(s,2),i=o[0],u=o[1],p=(0,w.useRef)(null);(0,w.useEffect)((function(){p.current&&p.current.complete&&u(!0)}),[]);return(0,j.jsxs)("div",{className:T()("lazy-image",t),children:[(0,j.jsx)("div",{style:{paddingBottom:"".concat(100/c,"%")}}),(0,j.jsx)("div",{className:"no-lqip",style:{backgroundColor:i?"white":"#eee"}}),(0,j.jsx)("img",{loading:"lazy",src:r,alt:n||"no alt",ref:p,onLoad:function(){u(!0)},className:T()("source",i&&"loaded")})]})},L=function(e){var t=e.dayOfWeek,r=e.maxTemp,n=e.minTemp,a=e.weatherStateAbbr;return(0,j.jsxs)("div",{className:"forecast",children:[(0,j.jsx)(_,{aspectRatio:1,src:"".concat("https://www.metaweather.com/static/img/weather","/").concat(a,".svg")}),(0,j.jsx)("div",{className:"title",children:S()(t).format("dddd")}),(0,j.jsxs)("div",{children:["Max Temp: ".concat(Math.round(r)),"\xb0"]}),(0,j.jsxs)("div",{children:["Min Temp: ".concat(Math.round(n)),"\xb0"]})]})},M=function(e){var t=e.woeLocations;return t.length?(0,j.jsx)("div",{className:"forecast-box",children:t.map((function(e){return(0,w.createElement)(L,(0,n.Z)((0,n.Z)({},e),{},{key:e.dayOfWeek}))}))}):(0,j.jsx)("div",{children:"Empty Data"})},A=r(982),F=function(e){var t=e.className,r=e.children;return(0,j.jsx)("div",{className:"skeleton ".concat(t||""),children:r})},R=function(){return(0,j.jsx)("div",{className:"forecast-box loader",children:(0,A.Z)(Array(5)).map((function(e,t){return(0,j.jsxs)("div",{className:"forecast",children:[(0,j.jsx)(F,{className:"img"}),(0,j.jsx)(F,{}),(0,j.jsx)(F,{}),(0,j.jsx)(F,{})]},t)}))})},B=function(e){var t=e.isFetching,r=e.isFetched,n=e.woeLocations,a=r&&n.length>0;return(0,j.jsxs)("div",{className:"weather-app container",children:[(0,j.jsxs)("h1",{className:"mb-4",children:[" ",(0,j.jsx)("span",{children:"Weather"})," Forecast"]}),(0,j.jsxs)("div",{className:"weather-box",children:[(0,j.jsx)(Z,{}),a&&(0,j.jsx)(M,{woeLocations:n}),t&&(0,j.jsx)(R,{})]})]})},W={fetchLocationByCity:x},q=(0,a.$j)((function(e){return(0,n.Z)({},y(e))}),W)(B)}}]);