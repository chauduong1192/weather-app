"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[365],{365:function(e,t,r){r.r(t),r.d(t,{App:function(){return ae},default:function(){return ce}});var n,a,c=r(204),i=r(391),s=function(e){return e[i.J]},o=r(413),l=r(313),u=r(531),d=r(757),f=r.n(d),p=r(87),h="location",m="".concat(h,"/search?query="),v="https://www.metaweather.com/static/img/weather",x=function(){var e=(0,u.Z)(f().mark((function e(t,r,n){var a,c,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://the-ultimate-api-challenge.herokuapp.com","/").concat("https://www.metaweather.com/api","/").concat(t),e.prev=1,e.next=4,fetch(a,{method:r,body:n,headers:{"Content-Type":"application/json"}});case 4:return c=e.sent,e.next=7,c.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:if(e.prev=11,e.t0=e.catch(1),!e.t0){e.next=15;break}return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,u.Z)(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(t,"GET"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,u.Z)(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("".concat(m).concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,u.Z)(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("".concat(h,"/").concat(t,"/")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r(417),g=function(e){var t=e.message;return(0,b.jsx)("div",{className:"not-found-text",role:"alert",children:t||"An error occurred"})},N=r(566),O=r.n(N),k=function(e){var t=e.locations,r=e.keyword,n=e.handleCitySelected;return(0,b.jsx)("div",{className:"search-suggestion",children:(0,b.jsx)("ul",{className:"options",tabIndex:0,children:t.map((function(e,t){var a=e.title,c=e.woeid;return(0,b.jsx)("li",{className:"option-tree",onClick:function(){n({title:a,woeid:c})},children:(0,b.jsx)("div",{className:"name",children:(0,b.jsx)(O(),{searchWords:[r],textToHighlight:a})})},t)}))})})},E=["title","titleId"];function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function T(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function C(e,t){var r=e.title,c=e.titleId,i=T(e,E);return l.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#6c757d",className:"bi bi-x-lg",viewBox:"0 0 16 16",ref:t,"aria-labelledby":c},i),r?l.createElement("title",{id:c},r):null,n||(n=l.createElement("path",{fillRule:"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"})),a||(a=l.createElement("path",{fillRule:"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"})))}var F,Z=l.forwardRef(C),I=(r.p,["title","titleId"]);function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}function M(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function L(e,t){var r=e.title,n=e.titleId,a=M(e,I);return l.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"#6c757d",className:"bi bi-search",viewBox:"0 0 16 16",ref:t,"aria-labelledby":n},a),r?l.createElement("title",{id:n},r):null,F||(F=l.createElement("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})))}var P,R=l.forwardRef(L),_=(r.p,function(e){var t,r=e.isError,n=e.isFetchingCity,a=e.isFetched,c=e.isFetchingWoe,i=e.errorMessage,s=e.locationSuggestions,o=e.fetchLocationByCity,d=e.fetchLocationByWoeId,p=e.setEmptyLocation,h=e.resetInitState,m=(0,l.useRef)(null);(0,l.useEffect)((function(){return function(){clearTimeout(t)}}),[t]);var v=function(){var e=(0,u.Z)(f().mark((function e(){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(null===(r=null===m||void 0===m||null===(t=m.current)||void 0===t?void 0:t.value)||void 0===r?void 0:r.trim())){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,o(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,u.Z)(f().mark((function e(t){var r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.title,n=t.woeid,m.current.value=r,p(),d(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){v()};return(0,b.jsxs)("div",{className:"search-form",children:[(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("input",{onKeyUp:function(e){var r;if("Enter"!==e.key){if(null===m||void 0===m||null===(r=m.current)||void 0===r||!r.value)return clearTimeout(t),void h();clearTimeout(t),t=setTimeout(y,500)}},onKeyDown:function(){clearTimeout(t)},onKeyPress:function(e){"Enter"!==e.key||v()},ref:m,type:"text",className:"form-control",placeholder:"Search weather for a city","aria-label":"Search input",autoFocus:!0,disabled:n||c}),(0,b.jsxs)("button",{type:"button",className:"btn btn-link","aria-label":"Search button",onClick:function(){var e;""!==(null===m||void 0===m||null===(e=m.current)||void 0===e?void 0:e.value)&&(a?(m.current.value="",h()):v())},children:[!n&&(a?(0,b.jsx)(Z,{}):(0,b.jsx)(R,{})),(n||c)&&(0,b.jsx)("div",{className:"icon-container",children:(0,b.jsx)("i",{className:"loader"})})]}),s.length>0&&(0,b.jsx)(k,{keyword:m.current.value,locations:s,handleCitySelected:x})]}),r&&i&&(0,b.jsx)(g,{message:i})]})}),B={fetchLocationByCity:function(e){return function(){var t=(0,u.Z)(f().mark((function t(r){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:p.Pw}),t.prev=1,t.next=4,w(e);case 4:n=t.sent,r({type:p.RS,payload:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({type:p.f9,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},fetchLocationByWoeId:function(e){return function(){var t=(0,u.Z)(f().mark((function t(r){var n,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:p.jz}),t.prev=1,t.next=4,j(e);case 4:n=t.sent,a=n.title,r({type:p.j$,payload:n.consolidated_weather.map((function(e){return{dayOfWeek:e.applicable_date,maxTemp:e.max_temp,minTemp:e.min_temp,weatherStateAbbr:e.weather_state_abbr,theTemp:e.the_temp,weaTherState:e.weather_state_name,title:a}}))}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r({type:p.mY,payload:t.t0});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},setEmptyLocation:function(){return function(e){e({type:p.Op,payload:[]})}},resetInitState:function(){return function(e){e({type:p.ir})}}},z=(0,c.$j)((function(e){return{isError:s(e).isError,isFetchingCity:s(e).isFetchingCity,isFetched:s(e).isFetched,isFetchingWoe:s(e).isFetchingWoe,errorMessage:s(e).errorMessage,locationSuggestions:s(e).locationSuggestions}}),B)(_),A=r(816),K=r.n(A),$=r(885),q=r(123),D=r.n(q),G=function(e){var t=e.className,r=e.src,n=e.alt,a=e.aspectRatio,c=void 0===a?2/3:a,i=(0,l.useState)(!1),s=(0,$.Z)(i,2),o=s[0],u=s[1],d=(0,l.useRef)(null);(0,l.useEffect)((function(){d.current&&d.current.complete&&u(!0)}),[]);return(0,b.jsxs)("div",{className:D()("lazy-image",t),children:[(0,b.jsx)("div",{style:{paddingBottom:"".concat(100/c,"%")}}),(0,b.jsx)("div",{className:"no-lqip",style:{backgroundColor:o?"transparent":"#eee"}}),(0,b.jsx)("img",{loading:"lazy",src:r,alt:n||"no alt",ref:d,onLoad:function(){u(!0)},className:D()("source",o&&"loaded")})]})},H=function(e){var t=e.dayOfWeek,r=e.maxTemp,n=e.minTemp,a=e.weatherStateAbbr;return(0,b.jsxs)("div",{className:"forecast",children:[(0,b.jsx)(G,{aspectRatio:1,src:"".concat(v,"/").concat(a,".svg")}),(0,b.jsx)("div",{className:"title",children:K()(t).format("dddd")}),(0,b.jsxs)("div",{className:"temp",children:["Max Temp: ".concat(Math.round(r)),"\xb0C"]}),(0,b.jsxs)("div",{className:"temp",children:["Min Temp: ".concat(Math.round(n)),"\xb0C"]})]})},J=function(e){var t=e.woeLocations;return t.length?(0,b.jsx)("div",{className:"forecast-box",children:t.map((function(e){return(0,l.createElement)(H,(0,o.Z)((0,o.Z)({},e),{},{key:e.dayOfWeek}))}))}):(0,b.jsx)("div",{children:"Empty Data"})},U=["title","titleId"];function Y(){return Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y.apply(this,arguments)}function Q(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function V(e,t){var r=e.title,n=e.titleId,a=Q(e,U);return l.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-geo-alt-fill",viewBox:"0 0 16 16",ref:t,"aria-labelledby":n},a),r?l.createElement("title",{id:n},r):null,P||(P=l.createElement("path",{d:"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"})))}var X=l.forwardRef(V),ee=(r.p,function(e){var t=e.dayOfWeek,r=e.weatherStateAbbr,n=e.theTemp,a=e.weaTherState,c=e.title;return(0,b.jsxs)("div",{className:"general-forecast",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"day-of-week",children:K()(t).format("dddd")}),(0,b.jsxs)("h3",{className:"address",children:[(0,b.jsx)(X,{})," ",c]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(G,{aspectRatio:1,src:"".concat(v,"/").concat(r,".svg")}),(0,b.jsxs)("h4",{className:"temp",children:["".concat(Math.round(n)),"\xb0C"]}),(0,b.jsx)("h5",{className:"weather-state",children:a})]})]})}),te=r(982),re=function(e){var t=e.className,r=e.children;return(0,b.jsx)("div",{className:"skeleton ".concat(t||""),children:r})},ne=function(){return(0,b.jsx)("div",{className:"forecast-box loader",children:(0,te.Z)(Array(5)).map((function(e,t){return(0,b.jsxs)("div",{className:"forecast",children:[(0,b.jsx)(re,{className:"img"}),(0,b.jsx)(re,{}),(0,b.jsx)(re,{}),(0,b.jsx)(re,{})]},t)}))})},ae=function(e){var t=e.isFetchingWoe,r=e.isFetched,n=e.woeLocations,a=r&&n.length>0;return(0,b.jsxs)("main",{className:"weather-app container",children:[(0,b.jsxs)("h1",{className:"mb-4",children:[" ",(0,b.jsx)("span",{children:"Weather"})," Forecast"]}),(0,b.jsxs)("div",{className:"row weather-box",children:[a&&(0,b.jsx)("div",{className:"left-side col-md-3 col-sm-4 col-12",children:(0,b.jsx)(ee,(0,o.Z)({},n[0]))}),(0,b.jsxs)("div",{className:"right-side ".concat(a&&"col-md-9 col-sm-8"," col-12"),children:[(0,b.jsx)(z,{}),a&&(0,b.jsx)(J,{woeLocations:n.slice(1)}),t&&(0,b.jsx)(ne,{})]})]})]})},ce=(0,c.$j)((function(e){return{isFetchingWoe:s(e).isFetchingWoe,isFetched:s(e).isFetched,woeLocations:s(e).woeLocations}}),{})(ae)}}]);